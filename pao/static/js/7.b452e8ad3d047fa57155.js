webpackJsonp([7],{"4UM0":function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a("cVr7"),e={name:"GroupSetting",data:function(){return{scroll:"",groupInfo:"",myUserInfo:"",userList:"",qrcodeLink:"",showUserList:!1,showGroupName:!1,forbiddeAdd:!1}},mounted:function(){document.title="群信息",this.scroll=new s.a(this.$refs.wrapper,{probeType:3,click:!0,bounce:{top:!1}});var t=this,i=this.$route.params.id;if(i)return this.loading(),void this.$httpRequest("ApiMemberGroupInfo","post",{group_number:i},function(i){(new auiToast).hide(),200==i.status_code&&(t.groupInfo=i.data.group_info,t.myUserInfo=i.data.group_myself,t.userList=i.data.group_member,t.qrcodeLink=i.data.group_link,t.forbiddeAdd=-1==i.data.group_info.group_limit,t.userList.length>=1&&i.data.group_info.group_user==i.data.group_myself.id&&(t.showUserList=!0),22==t.groupInfo.group_type&&t.myUserInfo.id==t.groupInfo.group_user_info.id&&t.$refs.forbidden.classList.remove("aui-hide"),setTimeout(function(){t.$refs.game_rules.offsetHeight>100&&(t.$refs.game_rules.style.height="130px",t.$refs.game_rules.style.overflow="hidden",t.groupInfo.group_cate_info.game_rules+='<div style="height: 60px;width: 92%;bottom: 0;font-size: 14px;color: #f4645f;position: absolute;text-align: center;line-height: 90px;background-image: -webkit-gradient(linear,left top, left bottom,from(rgba(255,255,255,0)),color-stop(70%, #fff));background-image: linear-gradient(-180deg,rgba(255,255,255,0) 0%,#fff 60%);">点击查看详细规则</div>'),t.scroll.refresh()},100))});t.$router.go(-1)},methods:{changePosition:function(){document.getElementById("model-input").scrollIntoViewIfNeeded()},showGroupUserList:function(){this.$router.push({path:"/groupUserList/"+this.groupInfo.group_number})},showGroupQrcode:function(){this.$router.push({path:"/qrcode/"+this.groupInfo.group_number+"/"+this.groupInfo.group_name})},showGroupRule:function(){this.$router.push({path:"/rule/"+this.groupInfo.group_number})},changeGroupTime:function(){var t=this,i=this,a=this.$refs.miaoTime.value;this.$dialog.confirm({title:'<b class="aui-font-size-20">是否需要更改自动秒抢时间？</b>',mes:"",opts:function(){t.loading(),t.$httpRequest("ApiSettingMiaoPacket","post",{group_number:t.groupInfo.group_number,seconds:a},function(t){(new auiToast).hide(),i.$dialog.alert({mes:"<div class='aui-font-size-20 aui-padded-15' style='color: #000;'><b>"+t.message+"</b></div>",callback:function(){}})})}})},changeStatus:function(){if(this.groupInfo.group_user==this.myUserInfo.id){var t=this;this.forbiddeAdd=!this.forbiddeAdd,this.loading(),this.$httpRequest("ApiGroupSettingLimit","post",{group_number:this.groupInfo.group_number},function(i){(new auiToast).hide(),t.$dialog.alert({mes:"<div class='aui-font-size-20 aui-padded-15' style='color: #000;'><b>"+i.message+"</b></div>",callback:function(){200!=i.status_code&&(t.forbiddeAdd=!t.forbiddeAdd)}})})}},WithdrawGroup:function(){var t=this;this.$dialog.confirm({title:"<div class='aui-font-size-20 aui-padded-15' style='color: #000;'><b>是否确认退出群聊？</b></div>",mes:"",opts:function(){t.$dialog.loading.open(),t.$httpRequest("ApiMyDeleteGroup","post",{group_number:t.$route.params.id},function(i){t.$dialog.loading.close(),t.$setItem("cacheJoinList",""),t.$dialog.alert({mes:"<div class='aui-font-size-20 aui-padded-15' style='color: #000;'><b>"+i.message+"</b></div>",callback:function(){200==i.status_code&&t.$router.push({path:"/ChatList"})}})})}})},saveGroupName:function(){var t=this.$refs["groupName-insert"].value;if(t!=this.groupInfo.group_name)if(""!=t){var i=this;i.$dialog.loading.open(),this.$httpRequest("ApiMyUpdateGroupName","post",{group_number:this.groupInfo.group_number,group_name:t},function(a){i.$dialog.loading.close(),200==a.status_code?(i.showGroupName=!1,i.groupInfo.group_name=t):i.$dialog.notify({mes:a.message,timeout:2e3})})}else this.$dialog.notify({mes:"请输入群名称",timeout:2e3});else this.showGroupName=!1},globalConfim:function(t,i){(new auiDialog).alert({title:"温馨提示",msg:t,buttons:["确定","取消"]},function(t){1==t.buttonIndex&&i()})},globalAlert:function(t,i){(new auiDialog).alert({title:"温馨提示",msg:t,buttons:["确定","取消"]},function(t){1==t.buttonIndex&&i()})},loading:function(){(new auiToast).loading({title:"加载中",duration:1e4},function(t){})}}},o={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{ref:"wrapper",staticClass:"wrapper"},[s("div",{staticClass:"wrapper-main"},[s("div",{staticClass:"aui-row-padded aui-padded-15 user-list"},[t._l(t.userList,function(i,a){return s("div",{key:a,staticClass:"aui-col-xs-2"},[s("img",{attrs:{src:t.webUrl+"/upload/"+i.avatar,alt:""}}),t._v(" "),s("div",{staticClass:"user-name"},[t._v(t._s(i.name))])])}),t._v(" "),s("div",{staticClass:"aui-col-xs-2",on:{click:t.showGroupQrcode}},[s("img",{staticStyle:{width:"50px!important"},attrs:{src:a("QBcd"),alt:""}})]),t._v(" "),s("div",{staticClass:"aui-clear"}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showUserList,expression:"showUserList"}],staticClass:"aui-text-center aui-margin-t-15 aui-font-size-16",staticStyle:{"letter-spacing":"1px",color:"#666"},on:{click:t.showGroupUserList}},[t._v("\n\t\t\t\t管理群成员"),s("img",{staticStyle:{display:"inline-block","vertical-align":"middle","margin-top":"-3px"},attrs:{src:a("gq/z"),width:"20",height:"20",alt:""}})])],2),t._v(" "),s("div",{staticClass:"groupinfo aui-margin-t-10",staticStyle:{"border-top":"0.03rem solid #ddd"}},[s("ul",{staticClass:"aui-list aui-form-list"},[s("li",{staticStyle:{"border-bottom":"0.03rem solid #eee"},on:{click:t.showGroupRule}},[s("div",{staticClass:"aui-font-size-20 aui-padded-l-15 aui-padded-t-15"},[t._v("群规则")]),t._v(" "),s("div",{ref:"game_rules",staticClass:"aui-padded-15 aui-padded-t-10",staticStyle:{position:"relative",color:"#888"},domProps:{innerHTML:t._s(t.groupInfo.group_cate_info?t.groupInfo.group_cate_info.game_rules:"")}}),t._v(" "),s("div",{staticClass:"aui-clear"})]),t._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:t.groupInfo.group_user_info,expression:"groupInfo.group_user_info"}],staticClass:"aui-list-item aui-padded-t-5 aui-padded-b-5"},[s("div",{staticClass:"aui-list-item-inner aui-list-item-arrow"},[s("div",{staticClass:"aui-list-item-label-icon aui-font-size-18"},[t._v("\n\t\t\t\t\t\t\t群主\n\t\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"aui-list-item-input"},[s("input",{staticClass:"aui-padded-r-15",attrs:{type:"text",readonly:"",placeholder:""},domProps:{value:t.groupInfo.group_user_info?t.groupInfo.group_user_info.name:""}})])])]),t._v(" "),s("li",{staticClass:"aui-list-item aui-padded-t-5 aui-padded-b-5",on:{click:function(i){t.groupInfo.group_user_info&&t.groupInfo.group_user_info.id==t.myUserInfo.id&&(t.showGroupName=!0)}}},[s("div",{staticClass:"aui-list-item-inner aui-list-item-arrow"},[s("div",{staticClass:"aui-list-item-label-icon aui-font-size-18"},[t._v("\n\t\t\t\t\t\t\t群聊名称\n\t\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"aui-list-item-input"},[s("input",{staticClass:"aui-padded-r-15",attrs:{type:"text",readonly:"",placeholder:""},domProps:{value:t.groupInfo.group_name}})])])]),t._v(" "),s("li",{staticClass:"aui-list-item aui-padded-t-5 aui-padded-b-5",on:{click:t.showGroupQrcode}},[t._m(0)])])]),t._v(" "),s("div",{ref:"forbidden",staticClass:"groupinfo aui-margin-t-10 aui-hide"},[s("ul",{staticClass:"aui-list aui-form-list"},[s("li",{staticClass:"aui-list-item aui-border-b"},[s("div",{staticClass:"aui-list-item-inner"},[s("div",{staticClass:"aui-list-item-label-icon aui-font-size-18"},[t._v("\n\t\t\t\t\t\t\t自动秒抢\n\t\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"aui-list-item-input",staticStyle:{position:"relative"}},[s("input",{ref:"miaoTime",staticStyle:{"padding-right":"1.5rem"},attrs:{type:"text",maxlength:"4",placeholder:""},domProps:{value:t.groupInfo.group_time},on:{blur:t.changeGroupTime}}),t._v(" "),s("span",{staticClass:"aui-font-size-18",staticStyle:{position:"absolute",right:"1rem",top:"0.405rem"}},[t._v("秒")])])])]),t._v(" "),s("li",{staticClass:"aui-list-item"},[s("div",{staticClass:"aui-list-item-inner aui-padded-t-5 aui-padded-b-5"},[s("div",{staticClass:"aui-list-item-label-icon aui-font-size-18"},[t._v("\n\t\t\t\t\t\t\t禁止加群\n\t\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"aui-list-item-input aui-text-right aui-margin-r-5 aui-font-size-18"},[t.groupInfo.group_user==t.myUserInfo.id?s("span",[t.forbiddeAdd?s("input",{staticClass:"aui-switch",attrs:{type:"checkbox",checked:""},on:{click:t.changeStatus}}):s("input",{staticClass:"aui-switch",attrs:{type:"checkbox"},on:{click:t.changeStatus}})]):s("span",[t.forbiddeAdd?s("input",{staticClass:"aui-switch",attrs:{type:"checkbox",disabled:"",checked:""}}):s("input",{staticClass:"aui-switch",attrs:{type:"checkbox",disabled:""}})])])])])])]),t._v(" "),s("div",{staticClass:"groupinfo aui-margin-t-10"},[s("ul",{staticClass:"aui-list aui-form-list"},[s("li",{staticClass:"aui-list-item"},[s("div",{staticClass:"aui-list-item-inner aui-list-item-arrow aui-padded-t-5 aui-padded-b-5"},[s("div",{staticClass:"aui-list-item-label-icon aui-font-size-18"},[t._v("\n\t\t\t\t\t\t\t我的昵称\n\t\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"aui-list-item-input aui-text-right aui-margin-r-15 aui-font-size-18"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.myUserInfo.name)+"\n\t\t\t\t\t\t")])])]),t._v(" "),s("li",{staticClass:"aui-list-item aui-padded-t-5 aui-padded-b-5"},[s("div",{staticClass:"aui-list-item-inner aui-list-item-arrow"},[s("div",{staticClass:"aui-list-item-label-icon aui-font-size-18"},[t._v("\n\t\t\t\t\t\t\t我的金币\n\t\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"aui-list-item-input aui-text-right aui-margin-r-15 aui-font-size-18"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.myUserInfo.balance)+"\n\t\t\t\t\t\t")])])])])]),t._v(" "),s("div",{staticClass:"aui-text-center aui-text-default aui-padded-t-15 aui-font-size-16"},[t._v("创群日期："+t._s(t.groupInfo.created_at))]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.groupInfo.group_user_info,expression:"groupInfo.group_user_info"}],staticClass:"aui-margin-15",on:{click:t.WithdrawGroup}},[s("div",{staticClass:"aui-btn aui-btn-block",staticStyle:{background:"#ef453a",color:"#ffe2b1"}},[t.groupInfo.group_user_info&&t.groupInfo.group_user_info.id==t.myUserInfo.id?s("span",[t._v("解散该群")]):s("span",[t._v("删除并退出")])])]),t._v(" "),s("div",{staticClass:"aui-clear",staticStyle:{height:"10px"}})]),t._v(" "),s("yd-popup",{attrs:{position:"center",width:"90%"},model:{value:t.showGroupName,callback:function(i){t.showGroupName=i},expression:"showGroupName"}},[s("div",{staticClass:"aui-padded-15",staticStyle:{"background-color":"#eee","border-radius":"5px"}},[s("div",{staticClass:"title aui-text-center aui-font-size-20 aui-margin-b-15"},[t._v("更改群名称")]),t._v(" "),s("div",{staticClass:"aui-row text-item",staticStyle:{background:"#fff"}},[s("div",{staticClass:"aui-col-xs-4 aui-font-size-16"},[s("img",{staticClass:"aui-pull-left",staticStyle:{"margin-top":"14px"},attrs:{src:a("obzp"),width:"20"}}),t._v(" 群名称\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"aui-col-xs-8"},[s("input",{ref:"groupName-insert",staticClass:"text-insert aui-text-right",staticStyle:{"margin-top":"-10px"},attrs:{type:"text",id:"model-input",placeholder:"群名称"},domProps:{value:t.groupInfo.group_name},on:{blur:t.changePosition,focus:t.changePosition}})])]),t._v(" "),s("div",{staticClass:"send-desc aui-text-left"},[t._v("Tip：请勿重复多次修改")]),t._v(" "),s("div",{staticClass:"aui-btn aui-btn-block rate-btn",on:{click:t.saveGroupName}},[t._v("确认保存")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"aui-list-item-inner aui-list-item-arrow"},[i("div",{staticClass:"aui-list-item-label-icon aui-font-size-18"},[this._v("\n\t\t\t\t\t\t\t群二维码\n\t\t\t\t\t\t")]),this._v(" "),i("div",{staticClass:"aui-list-item-input "},[i("img",{staticClass:"aui-pull-right aui-margin-r-15",attrs:{src:a("Glz4"),width:"20",alt:""}})])])}]};var r=a("VU/8")(e,o,!1,function(t){a("rbu/")},"data-v-362275de",null);i.default=r.exports},Glz4:function(t,i,a){t.exports=a.p+"static/img/erweima.00c76c4.png"},QBcd:function(t,i,a){t.exports=a.p+"static/img/add.87d4efe.png"},"gq/z":function(t,i,a){t.exports=a.p+"static/img/yJian.a56d38a.png"},obzp:function(t,i,a){t.exports=a.p+"static/img/qun.5c4506e.png"},"rbu/":function(t,i){}});