webpackJsonp([22],{"2pTp":function(i,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t("cVr7"),a=t("ofmo"),n={name:"GroupUserList",data:function(){var i=this;return{userList:"",scroll:"",user_id:0,currPage:1,endFresh:!1,showOption:!1,unique_id:0,myItems:[{label:"移除群员",callback:function(){i.removeUser(i.unique_id)}},{label:"开放发包权限",callback:function(){i.forbiddenSendPack(i.unique_id)}}]}},activated:function(){this.currPage=1,this.endFresh=!1,this.$refs.scrollEnd.classList.add("aui-hide"),this.showGroupUserList()},mounted:function(){s.a.use(a.a),this.scroll||(this.scroll=new s.a(this.$refs.wrapper,{probeType:3,click:!0,bounce:{top:!1},pullUpLoad:{threshold:10}}))},methods:{showGroupUserList:function(){var i=this,e=this.$route.params.id;this.$dialog.loading.open(),this.$httpRequest("ApiGroupAllMember","post",{page:this.currPage,group_number:e},function(e){if(i.$dialog.loading.close(),200==e.status_code){if(i.user_id=e.data.group_user,1==i.currPage)i.userList=e.data.data;else for(var t=0;t<e.data.data.length;t++)i.userList.push(e.data.data[t]);i.$nextTick(function(){i.scroll.refresh(),1==i.currPage&&i.scroll.on("pullingUp",function(){i.currPage++,i.endFresh||i.showGroupUserList()})}),i.scroll.finishPullUp()}else i.$refs.scrollEnd.classList.remove("aui-hide"),i.$nextTick(function(){i.scroll.refresh(),i.endFresh=!0,i.scroll.finishPullUp()})})},userOption:function(i,e){var t=this;this.unique_id=i,this.showOption=!0,1==e?(this.myItems=[{label:"移除群员",callback:function(){t.removeUser(i)}},{label:"禁止发包",callback:function(){t.forbiddenSendPack(i)}}],this.canSendPack="禁止发包"):this.myItems=[{label:"移除群员",callback:function(){t.removeUser(i)}},{label:"开放发包权限",callback:function(){t.forbiddenSendPack(i)}}]},forbiddenSendPack:function(i){var e=this;this.$dialog.confirm({title:'<div class="aui-font-size-20 aui-text-center aui-padded-15">您是否确定这么做？</div>',mes:"",opts:function(){e.$dialog.loading.open(),e.$httpRequest("ApiSettingCanSendPacket","post",{group_number:e.$route.params.id,unique_id:i},function(i){e.$dialog.loading.close(),e.$dialog.notify({mes:'<div class="aui-font-size-16">'+i.message+"</div>",timeout:2e3}),e.showGroupUserList()})}})},removeUser:function(i){var e=this;this.$dialog.confirm({title:'<div class="aui-font-size-20 aui-text-center aui-padded-15">您是否确定这么做？</div>',mes:"",opts:function(){e.$dialog.loading.open(),e.$httpRequest("ApiGroupKickPeople","post",{group_number:e.$route.params.id,unique_id:i},function(t){e.$dialog.loading.close(),e.$dialog.notify({mes:'<div class="aui-font-size-16">'+t.message+"</div>",timeout:2e3}),200==t.status_code&&(document.getElementById("item-"+i).style.display="none")})}})}}},u={render:function(){var i=this,e=i.$createElement,t=i._self._c||e;return t("div",{ref:"wrapper",staticClass:"wrapper"},[t("div",{staticClass:"wrapper-main"},[t("ul",{staticClass:"aui-list aui-media-list"},[i._l(i.userList,function(e,s){return t("li",{key:s,staticClass:"aui-list-item aui-list-item-middle aui-padded-t-5 aui-padded-b-5",attrs:{id:"item-"+e.unique_id}},[t("div",{staticClass:"aui-media-list-item-inner"},[t("div",{staticClass:"aui-list-item-media",staticStyle:{width:"3rem"}},[t("img",{staticClass:"aui-list-img-sm",staticStyle:{"border-radius":"5px","box-shadow":"#eee 0px 1px 10px 0px"},attrs:{src:i.webUrl+"/upload/"+e.avatar}})]),i._v(" "),t("div",{staticClass:"aui-list-item-inner"},[t("div",{staticClass:"aui-list-item-text"},[t("div",{staticClass:"aui-list-item-title aui-font-size-18 user-name"},[i._v("\n\t\t\t\t\t\t\t\t"+i._s(e.name)+" \n\t\t\t\t\t\t\t")]),i._v(" "),t("div",{staticClass:"aui-list-item-right"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.unique_id!=i.user_id,expression:"item.unique_id != user_id"}],staticClass:"aui-btn",staticStyle:{top:"0px",color:"#000"},on:{click:function(t){return i.userOption(e.unique_id,e.is_can_send)}}},[i._v("操作")])])]),i._v(" "),t("div",{staticClass:"aui-list-item-text"},[i._v("\n\t\t\t\t\t\t\t群员ID:  "+i._s(e.unique_id)+"\n\t\t\t\t\t\t\t"),e.unique_id==i.user_id?t("div",{staticClass:"aui-label aui-label-warning"},[i._v("群主")]):i._e(),i._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:1==e.is_can_send&&e.unique_id!=i.user_id,expression:"item.is_can_send == 1 && item.unique_id != user_id"}],staticClass:"aui-label aui-label-success"},[i._v("允许发包")]),i._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:-1==e.is_can_send,expression:"item.is_can_send == -1"}],staticClass:"aui-label aui-label-danger"},[i._v("禁止发包")])])])])])}),i._v(" "),t("div",{ref:"scrollEnd",staticClass:"aui-text-center zui-font-size-14 aui-text-default aui-padded-15 aui-hide"},[i._v("~~我也是有底线的~~")])],2)]),i._v(" "),t("yd-actionsheet",{attrs:{items:i.myItems,cancel:"取消"},model:{value:i.showOption,callback:function(e){i.showOption=e},expression:"showOption"}})],1)},staticRenderFns:[]};var l=t("VU/8")(n,u,!1,function(i){t("W1CN")},"data-v-7d163383",null);e.default=l.exports},W1CN:function(i,e){}});