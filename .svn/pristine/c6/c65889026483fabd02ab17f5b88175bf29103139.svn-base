<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
	<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Expires" content="0" />

	<title>聚农优享</title>
	<meta name="viewport"
		content="width=device-width,initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
	<!-- <link rel="stylesheet" type="text/css" href="./css/aui.css" /> -->
	<link rel="stylesheet" href="css/reset.css?v=1">
	<link rel="stylesheet" href="css/public.css?v=1">
	<link rel="stylesheet" href="css/index.css?v=1">

	<script src="./js/rem.js"></script>
	<script src="./js/vue.js"></script>
	<script src="js/index.js"></script>
	<script src="js/axios.min.js"></script>
	<script src="js/vue-resource.js"></script>
	<script type="text/javascript" src="js/publick.js?v=3"></script>
	<script type="text/javascript" src="./js/api.js"></script>
	<script type="text/javascript" src="./js/jweixin-1.4.0.js"></script>
	<script type="text/javascript" src="js/aui-actionsheet.js"></script>
	<!-- 引入 Vue 和 Vant 的 JS 文件 -->
	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vant@2.8.7/lib/index.css">
	<script src="https://cdn.jsdelivr.net/npm/vant@2.8.7/lib/vant.min.js"></script>
	<script src="js/vconsole.min.js"></script>
	<script>
		// var vConsole = new VConsole();
	</script>
	<style>
		[v-cloak] {
			display: none;
		}

		img {
			vertical-align: top;
		}

		ul li {
			list-style: none;
		}

		.headDiv {
			font-size: 15px;
			/* font-weight: bold; */
			/* padding: 0 0.3rem; */
			/* width: calc(100% - 0.6rem); */
			width: 100%;
			overflow: hidden;
			background: #fff;
			border-radius: 0 0 15px 15px;
		}

		.headDiv .fl {
			/* height:50px; */
			overflow: hidden;
		}

		.headDiv .top {
			height: 50px;
			display: flex;
			justify-content: space-between;
			align-items: center;
		}

		.headDiv .top .left {
			display: flex;
			justify-content: flex-start;
			align-items: center;
			width: calc(100% - 30px);
		}

		.headDiv .top .left img {
			height: 20px;
			margin-right: 10px;
		}

		.headDiv .top .right {
			display: flex;
			justify-content: flex-end;
			align-items: center;
			width: 30px;
		}

		.headDiv .top .right img {
			width: 20px;
			padding-left: 10px;
		}

		/* 搜索框 */
		.headDiv .sousuo {
			position: relative;
		}

		.headDiv .sousuo input {
			border: none;
			width: 95%;
			height: 35px;
			background: rgba(243, 243, 243, 1);
			border-radius: 35px;
			padding-left: 10px;
			font-size: 14px;
			text-align: center;
		}

		.headDiv .sousuo img {
			position: absolute;
			left: 31%;
			top: 10px;
			width: 15px;
			height: 15px;
		}

		/* 轮播 */
		.slide {
			height: 140px;
			margin-top: 10px;
			overflow: hidden;
			position: relative;
		}

		/* .slideshow {
					height: 140px;
					 width: 100% !important; 
				} */
		.slide li {
			position: absolute;
		}

		.slide img {
			border-radius: 10px;
		}

		.bar {
			position: absolute;
			width: 100%;
			bottom: 10px;
			margin: 0 auto;
			z-index: 10;
			text-align: center;
		}

		.bar span {
			width: 20px;
			height: 5px;
			background: white;
			display: inline-block;
			margin-right: 10px;
		}

		.slide .active {
			background: #bfd6b6 !important;
		}

		/*图标导航*/
		.nav {
			display: flex;
			flex-wrap: nowrap;
			justify-content: flex-start;
			align-content: space-between;
			padding-top: 0.24rem;
			margin-top: 10px;
			padding: 0 2%;
			width: 95%;
			overflow-x: auto;
			overflow-y: hidden;
			white-space: nowrap;
		}

		.nav img {
			width: 1.2rem;
			height: 1.2rem;
			margin-bottom: 10px;
			border: 2px solid transparent;
		}

		.nav li {
			text-align: center;
			font-size: 0.24rem;
			color: #444;
			margin: 0.14rem;
			width: 16%;
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
		}

		.nav li.active img {
			border: 2px solid #02CF0A;
			border-radius: 50%;
		}

		.nav li.active span {
			color: #fff;
			background: #00BE34;
			border-radius: 20px;
			padding: 4px;
		}

		.nav li a {
			display: flex;
			flex-direction: column;
			align-items: center;
		}

		.goods {
			width: 100%;
			margin-top: 10px;
		}

		.goods>img {
			width: 25%;
			display: block;
			margin: 0 auto;
		}

		.xixuan {
			width: 45%;
			margin-top: 0.3rem;
			margin-left: 0.24rem;
			border-radius: 5px;
			box-sizing: border-box;
			background-color: #fff;
		}

		.jingT {
			min-width: 7.5rem;
			min-height: 4.2rem;
			margin-bottom: 1.56rem;
			padding-bottom: 0.3rem;
			background-color: #f5f5f5;
			display: flex;
			justify-content: flex-start;
			flex-wrap: wrap;
		}

		.xixuan .xixuan_img {
			width: 2.95rem!important;
			height: 2.95rem!important;
			margin: 0.24rem;
			box-sizing: border-box;
			position: relative;
		}

		.xixuan_img img {
			width: 100%;
			height: 100%;
		}
		.xixuan_img .zhezhao {
			width: 3rem!important;
			height: 3rem!important;
			opacity:0.6; 
			filter: alpha(opacity=60); background-color:#000; 
			position: absolute;
			top: 0;
			left: 0;
		}
		.xixuan .box1 {
			width: 100%;
			margin: 0.1rem;
		}

		.xixuan>p {
			font-size: 12px;
			margin-top: 13px;
			margin-left: 0.24rem;
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
		}

		.xixuan span {
			height: 29px;
			display: inline-block;
			font-size: 0.22rem;
			color: #989898;
			overflow: hidden;
		}

		.xixuan .price {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin: 0.22rem;
		}
		.xixuan .price p span:first-of-type {
			color: #FF2814;
			font-size: 0.35rem;
		}
		.xixuan .price>span {
			border: 2px solid #EDEDED;
			height: 25px;
			text-align: center;
			line-height: 25px;
			border-radius: 50%;
			font-size: 20px;
			color: #5FC22A;
		}

		.bottom-nav {
			width: 100%;
			height: 50px;
			border-bottom: 1px solid #e6e6e6;
			position: fixed;
			bottom: 0;
			display: flex;
			background-color: #fff;
			padding-bottom: 4px;
		}

		.bottom-nav .box1 {
			text-align: center;
			padding-top: 10px;
			width: 25%;
		}

		.bottom-nav .box1 img {
			width: 24px;
			height: 24px;
		}

		.font-color {
			color: #04C03A;
		}

		.aui-mask {
			position: fixed;
			width: 100%;
			height: 100%;
			top: 0;
			left: 0;
			background: rgba(0, 0, 0, 0.3);
			opacity: 0;
			z-index: 8;
			visibility: hidden;
			-webkit-transition: opacity .3s, -webkit-transform .3s;
			transition: opacity .3s, transform .3s;
		}

		.aui-mask.aui-mask-in {
			visibility: visible;
			opacity: 1;
		}

		.aui-actionsheet {
			width: 100%;
			position: fixed;
			bottom: 0;
			left: 0;
			padding: 0 0.5rem;
			z-index: 999;
			opacity: 0;
			-webkit-transition: opacity .3s, -webkit-transform .3s;
			transition: opacity .3s, transform .3s;
			-webkit-transform: translate3d(0, 100%, 0);
			transform: translate3d(0, 100%, 0);
		}

		.aui-actionsheet-btn {
			background-color: #ffffff;
			border-radius: 6px;
			text-align: center;
			margin-bottom: 0.5rem;
		}

		.aui-actionsheet-title {
			font-size: 14px;
			color: #999999;
			line-height: 40px;
		}

		.aui-actionsheet-btn-item {
			height: 40px;
			line-height: 40px;
			color: #0075f0;
		}

		@media screen and (-webkit-min-device-pixel-ratio:1.5) {
			.aui-border-b {
				border: none;
				background-size: 100% 1px;
				background-repeat: no-repeat;
				background-position: bottom;
				background-image: linear-gradient(0, #dddddd, #dddddd 50%, transparent 50%);
				background-image: -webkit-linear-gradient(90deg, #dddddd, #dddddd 50%, transparent 50%);
			}
		}

		.aui-actionsheet-btn {
			max-height: 300px;
			overflow-x: hidden;
			overflow-y: auto;
		}

		.aui-actionsheet {
			padding: 0;
		}

		.aui-actionsheet-btn {
			margin-bottom: 0;
		}

		.share-mask {
			height: 100%;
			width: 100%;
			z-index: 20000;
			top: 0;
			left: 0;
			color: #fff;
			position: fixed;
			background: rgba(0, 0, 0, 0.8);
		}

		.share-mask-content p {
			padding-left: 20px;
			font-size: 28px;
			color: #fff
		}

		.overlay {
			background: rgba(0, 0, 0, .5);
			width: 100%;
			height: 100vh;
			position: fixed;
			top: 0;
			left: 0;
			z-index: 999;
		}

		.actionSheet {
			position: fixed;
			bottom: 0;
			left: 0;
			z-index: 1000;
			width: 100%;
			height: 100%;
			height: 385px;
			overflow-y: scroll;
			background: #f7f8fa;
			border-radius: 20px 20px 0 0;
		}

		.actionSheet h3 {
			line-height: 46px;
			position: relative;
			font-weight: bold;
			text-align: center;
			background: #fff;
			font-size: 0.28rem;
		}

		.actionSheet h3 span {
			position: absolute;
			right: 0;
			top: 0;
			font-size: 0.28rem;
			padding-right: 0.32rem;
		}

		.actionSheet ul {
			height: 280px;
			overflow-y: auto;
			background: #fff;
			border-top: 1px solid #ebedf0;
		}
		

		.actionSheet ul li {
			height: 46px;
			line-height: 46px;
			text-align: center;
			
			position: relative;
		}

		.actionSheet ul li span {
			line-height: 46px;
			display: block;
		}

		.actionSheet li .imgSpan {
			position: absolute;
			right: 0;
			top: 0;
			width: 16%;
			height: 40px;
			padding-left: 0;
			z-index: 99999;
		}

		.actionSheet li .imgSpan img {
			width: 16px;
			margin-top: 10px;
			display: inline-block;

		}

		.actionSheet p {
			position: fixed;
			bottom: 0;
			height: 46px;
			line-height: 46px;
			width: 100%;
			text-align: center;
			background: #fff;
			font-size: 0.32rem;
		}
		/* .van-swipe__track{
			width: 100% !important; 
		} */


		.resou {
			color: #888;
			font-size: 12px;
			display: flex;
			justify-content: flex-start;
			line-height: 24px;
			margin: 10px 0;
		}

		.resou ul {
			display: flex;
			justify-content: space-around;
		}

		.resou ul li {
			padding: 0 6px;
			background: rgba(245, 245, 245, 1);
			border-radius: 19px;
			margin-left: 0.24rem;
		}

		.van-swipe {
			height: 140px;
			margin-top: 10px;
		}

		.gonggao {
			display: flex;
			justify-content: flex-start;
			align-items: center;
			height: 30px;
			padding: 10px 0;
		}

		.gonggao p {
			font-size: 14px;
			margin-left: 10px;
			padding-left: 10px;
			border-left: 1px solid #D8D8D8;
			line-height: 20px;
			overflow: hidden;
			white-space: nowrap;
			width: 70%;
			text-overflow: ellipsis;
		}
		.qianggou {
			background: #f5f5f5;
			width: 100%;
			padding: 0 0.3rem;
			box-sizing: border-box;
			border-radius: 10px;
			margin: 0.3rem 0;
		}

		.qianggou .van-tabs__nav {
			display: flex;
			justify-content: center;
			width: 100%;
		}

		.qianggou .van-tab {
			width: 100%;
			/* text-align: center; */
			display: flex;
			/* justify-content: center; */
			background: #E8F3EB;
			color: #658B71;
			border-top-left-radius: 4px;
			border-top-right-radius: 4px;
		}
		.qianggou .van-tabs { border-radius: 4px; }
		.van-hairline--top-bottom::after, .van-hairline-unset--top-bottom::after{
			border-width: 0;
		}
		.van-tabs{
			background: #FB1A3F;
		}
		.van-tabs .proItem{
			background: #fff;
			margin: 0 5px 10px 5px;
			border-radius: 5px;
		}
		.van-tabs .proItem .proTip{
			position: absolute;
			left: 10px;
			top: 0;
			width: auto;
			color: #fff;
			font-size: 11px;
			padding: 0 3px;
			background: linear-gradient(#FF5E00, #FF1A1A);
			border-radius: 4px 0px 12px 0px;
		}

		
		.qianggou .van-tab--active {
			background: #FB1A3F;
			color: #fff;
			font-weight: bold !important;
			font-size: 15px !important;
		}
		.qianggou .van-tab--active .tips{
			padding-left: 5px;
			font-size: 12px;
			font-weight: normal;
		}
		

		.qianggou .van-tab>span {
			display: flex;
			align-items: center;
			height: 40px;
			width: 100%;
			padding-left: 5px;
		}

		.qianggou .van-tab>span img {
			width: 20px;
			height: 20px;
			margin-right: 10px;
		}

		.qianggou .pro {
			width: calc(100% - 10px);
			display: flex;
			justify-content: flex-start;
			overflow-x: auto;
			overflow-y: hidden;
			white-space: nowrap;
			padding-left: 5px;
		}
		.qianggou .pro .pricePromtion{
			width: calc(100% - 16px);
			padding: 5px 8px;
			text-indent: -5px;
			background: linear-gradient(#ffefca, #fee4a8);
			border-bottom-left-radius: 5px;
			border-bottom-right-radius: 5px;
		}
		.qianggou .pro>div {
			width: 30%;
			/* padding: 10px; */
		}

		.qianggou .pro>div>img {
			/* width: 100%; */
			width:1.5rem;
			height: 1.5rem;
			object-fit: cover;
			/* max-width: calc(100% - 20px); */
			padding: 10px;
		}
		.qianggou .pro>div>img.isOver{
			opacity: 0.6;
		}

		.qianggou .pro p {
			padding: 0 10px;
			color: #353535;
			font-size: 14px;
			width: calc(100% - 20px);
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
			margin-top: 5px;
		}

		.qianggou .pro div p span {
			font-size: 12px;
			color: #888888;
		}

		.qianggou .pro>div>div {
			display: flex;
			align-items: center;
			justify-content: flex-start;
			margin-top: 5px;
		}

		.qianggou .pro div span {
			color: #FF2814;
			font-size: 14px;
			font-weight: bold;
		}

		.qianggou .pro>div>div>img {
			width: 24px;
			height: 24px;
		}

		.ball.drop-enter-active {
			transition: all 0.8s cubic-bezier(0.49, -0.29, 0.75, 0.41);
		}

		html::-webkit-scrollbar,
		body::-webkit-scrollbar,
		.qianggou .pro::-webkit-scrollbar,
		.nav::-webkit-scrollbar {
			width: 0px;
			height: 0px;
		}

		.isFixed{
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			background: #ffffff;
			z-index: 999999;
		}
		/* 拼团 */
		.pintuan { background: #f5f5f5; width: 100%; padding: 0 0.3rem; box-sizing: border-box; border-radius: 10px; margin: 0.3rem 0; }
		.pintuan .van-tabs__nav { display: flex; justify-content: center; width: 100%; }
		.pintuan .van-tab { width: 100%; display: flex; background: #E8F3EB; color: #658B71; border-top-left-radius: 4px; border-top-right-radius: 4px; }
		.pintuan .van-tabs { border-radius: 4px; }
		.pintuan .van-tab--active { background: #FB1A3F; color: #fff; font-weight: bold !important; font-size: 15px !important; }
		.pintuan .van-tab--active .tips { padding-left: 5px; font-size: 12px; font-weight: normal; }
		.pintuan .van-tab>span { display: flex; align-items: center; height: 40px; width: 100%; padding-left: 5px;}
		.pintuan .van-tab>span img { width: 20px; height: 20px; margin-right: 10px; }
		.pintuan .pro { width: calc(100% - 10px); display: flex; justify-content: flex-start; overflow-x: auto; overflow-y: hidden; white-space: nowrap; padding-left: 5px; }
		.pintuan .pro .pricePromtion { width: calc(100% - 16px); padding: 5px 8px; text-indent: -5px; background: linear-gradient(#ffefca, #fee4a8); border-bottom-left-radius: 5px; border-bottom-right-radius: 5px; }
		.pintuan .pro>div { width: 30%; }
		.pintuan .pro>div>img { width: 1.5rem; height: 1.5rem; object-fit: cover; padding: 10px; }
		.pintuan .pro>div>img.isOver { opacity: 0.6; }
		.pintuan .pro p { padding: 0 10px; color: #353535; font-size: 14px; width: calc(100% - 20px); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; margin-top: 5px; }
		.pintuan .pro div p span { font-size: 12px; color: #888888; }
		.pintuan .pro>div>div { display: flex; align-items: center; justify-content: flex-start; margin-top: 5px; }
		.pintuan .pro div span { color: #FF2814; font-size: 14px; font-weight: bold; }
		.pintuan .pro>div>div>img { width: 24px; height: 24px; }
		.pintuan .pro::-webkit-scrollbar,.nav::-webkit-scrollbar { width: 0px; height: 0px; }

		/* 顶部 */
		/* .headDiv { background: url('./images/index-bg.png') no-repeat; background-size: 100% 100%; } */
		.top-con { display: flex; align-items: center; justify-content: space-between; padding: 0.3rem; padding-top: 0.5rem; padding-bottom: 0.1rem; position: relative;} 
		.top-con .left { flex: 1; display: flex; flex-direction: column; width: calc(100% - 3rem); overflow: hidden; }
		.top-con .left .left-top { display: flex; align-items: center; width: 100%;}
		.top-con .left .left-top img { width: 0.4rem;}
		.top-con .left .left-top .shop-name-con { display: flex; align-items: center; width: 100%; }
		.top-con .left .left-top .shop-name-con .tit { max-width: calc(100% - 45px); margin:0 5px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; color: #fff; font-weight: bold; }
		.top-con .left .shop-desc { color: #fff; opacity: 0.79; font-size: 0.24rem; padding-left: 0.45rem; }
		.top-con .search-con { width: 2.1rem; height: 0.6rem; background: #62de9e; color: #fff; font-size: 0.28rem; display: flex; align-items: center;  border-radius: 100px; padding: 0 0.2rem; box-sizing: border-box; margin: 0 0.3rem}
		.top-con .right {display: flex; align-items: center; justify-content: flex-end;}
		.van-sticky--fixed { background: #fff; }
		/* 瓜分优惠券 */
		.guafen-con { position: relative; padding: 0 0.3rem; }
		.guafen-con .top { position: relative; top: 0.2rem; background: url('./images/guafen-yhq-bg2.png') no-repeat; background-size: 100% 100%; width: 100%; height: calc(95vw *0.22); }
		.guafen-con .top .left { position: absolute; width: 0; height: 0;border-top: 0.16rem solid #f5f5f5;border-right: 0.4rem solid transparent; left: -0.02rem; bottom: 0.06rem; z-index: 99999; }
		.guafen-con .top .right { position: absolute; width: 0; height: 0;border-top: 0.16rem solid #f5f5f5;border-left: 0.4rem solid transparent; right: -0.02rem; bottom: 0.06rem; z-index: 99999; }
		.guafen-con .bottom { width: 100%; background: #FB1A3F; display: flex; align-items: center; justify-content: flex-start; overflow: hidden; height: 2.1rem; margin-bottom: -0.2rem; padding-top: 0.2rem; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; overflow-y: hidden; overflow-x: auto; box-sizing: border-box; }
		.guafen-con .bottom .item { flex-shrink: 0;margin: 0 0.12rem; background: url('./images/yhq-item-bg.png') no-repeat; background-size: 100% 100%;width:calc(50vw - 0.54rem); height: calc((50vw - 0.54rem)*0.38);display: flex;  }
		.guafen-con .bottom .item .left { display: flex; align-items: center; justify-content: center; flex-direction: column; width: 79%; height: 100%; }
		.guafen-con .bottom .item .left .price { color: #fa193f; font-weight: bold; font-size: 0.48rem; }
		.guafen-con .bottom .item .left .desc { font-size: 0.24rem; color: #86471c; font-weight: 500; } 
		.guafen-con .bottom .item .right { display: flex; align-items: center; flex-direction: column;justify-content: center; width: 21%; height: 100%; }
		.guafen-con .bottom .item .right span { font-size: 0.24rem; color: #86471c; font-weight: 500;  }
		
		.guafen-con+.qianggou { margin-top: 0; border-radius: 0; }	
		.guafen-con+.qianggou .van-tab { border-top-left-radius: 0; border-top-right-radius:0 }

		.guafen-con+.pintuan { margin-top: 0; border-radius: 0; }	
		.guafen-con+.pintuan .van-tab { border-top-left-radius: 0; border-top-right-radius:0 }
		.qianggou+.pintuan { margin-top: 0; border-radius: 0; }	
		.qianggou+.pintuan .van-tab { border-top-left-radius: 0; border-top-right-radius:0 }

		/* 商品列表 */
		.goods-con  {  background: transparent; position: relative;  }
		.goods-con .van-grid-item .van-grid-item__content { border-radius: 8px; height: auto!important; justify-content: inherit;box-shadow:0 0 8px rgba(0,0,0,.1) }
		.goods-con .van-grid-item__icon-wrapper { width: 100%; height: calc(50vw - 31px); }
		.goods-con .no-sale { position: absolute; top: 50%; left: 50%;background: rgba(0,0,0,0.6); transform: translate(-50%,-50%);width: 1rem; height: 0.48rem; border-radius: 4px; color: #fff; font-size: 0.24rem; text-align: center; line-height: 0.48rem; }
		.goods-con .goods-title { font-size: 0.26rem; font-weight: bold; width: calc(50vw - 31px); height: 20px;overflow: hidden;text-overflow: ellipsis; white-space: nowrap; margin-top: 6px;}
		.goods-con .goods-spec { width: 100%; font-size: 0.24rem;margin-top: 6px;color: #888;width: calc(50vw - 31px); height: 20px;overflow: hidden;text-overflow: ellipsis; white-space: nowrap; }
		.goods-con .price-con { width: calc(50vw - 31px); display: flex; align-items: center; justify-content: space-between; overflow: hidden; }
		.goods-con .price-con .left-con { width: calc(50vw - 31px); overflow: hidden;  }
		.goods-con .price-con .left-con .price-cell { width: 100%; display: flex; align-items: center;flex-direction: column; }
		.goods-con .price-con .left-con .price-cell .price { font-size: 0.32rem; font-weight: bold; color: #fa193f;height: 30px;line-height: 30px; overflow: hidden; text-overflow: ellipsis; width: 100%;white-space: nowrap; }
		.goods-con .price-con .left-con .price-cell .price .price-icon { font-size: 0.28rem; }
		.goods-con .price-con .left-con .price-cell .price .unit { color: #888; font-size: 0.26rem; font-weight: 400; }
		.goods-con .price-con .left-con .price-cell .price2 { font-size: 0.28rem; color: #888; text-decoration: line-through; overflow: hidden; text-overflow: ellipsis; width: 100%;white-space: nowrap;}
		/* 店铺弹出框 */
		.van-popup { display: flex; flex-direction: column; }
		.van-popup .tit-con { height: 0.92rem; display: flex; align-items: center; text-align: center; }
		.van-popup .tit-con .text { flex: 1; font-size: 0.28rem; font-weight: bold;}
		.van-popup .tit-con .type { width: 1.5rem; font-size: 0.28rem; font-weight: bold;}
		.van-popup .shop-con { flex: 1; overflow-y: scroll;  }
		.van-popup .shop-con .shop-item {  font-size: 0.28rem; display: flex; align-items: center; justify-content: center; text-align: center; padding: 0.24rem; }
		.van-popup .shop-con .shop-item .title { flex: 1; display: flex;align-items: center; justify-content: center; position: relative; min-height: 30px;}
		.van-popup .shop-con .shop-item .del-icon { position:absolute; right: 10px; top: 50%; width: 70px; height:30px; transform: translateY(-50%); background: #fef0f0; border: 1px solid #fbc4c4; color: #f56c6c; border-radius: 100px; text-align: center; line-height: 30px;  }
		.van-popup .btn-con { padding: 0.24rem; }
		/* 无数据 */
		.no-data-con { position: absolute;  width: 90%; top: 50%; left: 50%; transform: translate(-50%,-50%); text-align: center; }
		.no-data-con img { width: 100%; }
		.no-data-con .no-title{ font-size: 0.32rem; font-weight:600;  color:rgba(0,0,0,1);  }
		.no-data-con .no-desc { font-size: 0.24rem; font-weight:400; color:rgba(136,136,136,1); padding: 0.25rem 0; }
		.no-data-con .van-button { font-size: 0.24rem; font-weight:400; color:rgba(1,195,39,1); }

		.van-notice-bar { background: #fff; padding: 0; margin: 0; color: #333; width: 100%; height: 100%; }
	</style>
</head>

<body>
	<div id="app" :class="!isAction ? 'touch' : 'no-touch'" v-cloak>
		<!-- <div v-show="showPage"> -->

		<!-- 隐藏表头 -->
		<div class="headDiv">
			<img src="./images/index-bg.png" style="position: absolute; width: 100%;" alt="">
			<div class="top-con" >
				<div class="left" @click="openActionsheet()">
					<div class="left-top">
						<img src="./images/white-address.png" alt="">
						<div class="shop-name-con">
							<div class="tit">{{shopInfo.shop_name}}</div>
							<van-icon name="arrow-down" color="#fff" ></van-icon>
						</div>
					</div>
					<div class="shop-desc">下单请选择您附近的店铺</div>
				</div>
				<div class="search-con" @click="search">
					<van-icon name="search" color="#fff" size="16"></van-icon>
					<span style="padding-left: 0.2rem;">搜商品</span>
				</div>
				<div class="right" @click="getScanQRCode()">
					<van-icon name="scan" color="#fff" size="25"></van-icon>
				</div>
			</div>
			<div style="padding: 0 0.3rem;">
				<van-swipe :autoplay="2500" v-if="bannerImg.length!=0">
					<van-swipe-item v-for="(item, index) in bannerImg" :key="index" >
						<a  v-if="item.link"  @click="bannerClick(item)">
							<img :src="item.url"  style="width:100%;height:140px;object-fit:cover;border-radius: 5px; background: #f7f8fa;" onerror="this.src='./images/banner_err_img1.png';this.onerror='null'">
						</a>
						<a href="javascript:;">
							<img :src="item.url"  style="width:100%;height:140px;object-fit:cover;border-radius: 5px;background: #f7f8fa;" onerror="this.src='./images/banner_err_img1.png';this.onerror='null'">
						</a>
					</van-swipe-item>
				</van-swipe>
				<van-swipe v-else>
					<van-swipe-item v-for="(item,index) in banner" :key="index">
						<a href="javascript:;">
							<img :src="item.url" style="width:100%;height:140px;object-fit:cover;border-radius: 5px;background: #f7f8fa;" onerror="this.src='./images/banner_err_img1.png';this.onerror='null'">
						</a>
					</van-swipe-item>
				</van-swipe>
				<div class="gonggao">
					<img src="./images/icon/gonggao.png" alt="" width="20%" onerror="this.src='images/icon/gonggao.png'" />
					<div style="font-size: 14px; height: 18px;position: relative;
					left: 10px;font-weight: normal;overflow: hidden;width: 100%;">
						<van-notice-bar scrollable :text="announcement?announcement:'欢迎光临本店铺！'" ></van-notice-bar>
					</div>
				</div>
			</div>
		</div>
 		<div class="guafen-con" v-if="couponList && couponList.length > 0">
			<div class="top" @click="jump('couponCenter.html')">
				<div class="left"></div>
				<div class="right"></div>
			</div>
			<div class="bottom" :style="couponList.length == 1 ? 'justify-content:center':'justify-content:flex-start'">
				<div class="item" v-for="(item,index) in couponList" :key="index">
					<div class="left">
						<span class="price" v-if="item.type == 0">￥{{item.money}}</span>
						<span class="price"v-if="item.type == 1">{{item.discount}}<span style="font-size: 0.4rem;"> 折</span></span>
						<span class="desc">{{item.type_str}}</span>
					</div>
					<div class="right" @click="jump('couponCenter.html')">
						<span>去</span>
						<span>领</span>
						<span>取</span>
					</div>
				</div>
			</div>
		</div> 
		<div class="qianggou" v-if="promotion_goods.length!=0" :style="teamsGoodsList.length!=0 ? 'margin-bottom:0':''">
			<van-tabs line-width="0" :style="teamsGoodsList.length!=0 ? 'border-radius:0':''">
				<van-tab>
					<template slot="title">
						限时抢购 <span class="tips">新鲜好货一折起&nbsp;&nbsp;手慢无</span>
					</template>
					<div class="pro">
						<div class="proItem" v-for="(item,index) in promotion_goods" style="position: relative;text-align: center;" @click="detailsCuXiao(item.goods_id, item.spcifi_name)">
							<img :src="item.thumb" alt="" v-if="item.storage>=0" :class="{'isOver': item.storage==0}">
							<div v-if="item.storage == 0"
								style="position: absolute;left: calc(50% - 30px);top: 45px;background: rgba(0, 0, 0, 0.6);border-radius: 4px;">
								<p style="color: #fff;" >已售完</p>
							</div>
							<p class="proTip" :class="{'isOver': item.storage==0}">秒杀价</p>
							<p>
								{{item.goods_name}}<br>
							</p>
							<div class="pricePromtion" style="overflow: hidden;">
								<span style="font-weight: normal;font-size: 12px;">￥&nbsp; </span><span>{{item.promotion_price}}</span>
								<span style="color: #CCCCCC;text-decoration: line-through;font-size: 11px;font-weight: normal; overflow: hidden; display: -webkit-box;">&nbsp;￥{{item.retail_price}}</span>
							</div>
						</div>
					</div>
				</van-tab>
			</van-tabs>
		</div>
		<div class="pintuan" v-if="teamsGoodsList.length!=0" :style="(promotion_goods.length!=0 || couponList.length != 0) ? 'margin-top:0':''">
			<van-tabs line-width="0">
				<van-tab>
					<template slot="title">
						优惠拼团 <span class="tips">新鲜好货一折起&nbsp;&nbsp;手慢无</span>
					</template>
					<div class="pro">
						<div class="proItem" v-for="(item,index) in teamsGoodsList" style="position: relative;text-align: center;" @click="detailsPinTuan(item)">
							<img :src="item.thumb" alt="" v-if="item.storage>0" onerror="this.src='http://sy.xfd365.com/public/uploads/exp.jpg';this.onerror='null'">
							<img :src="item.thumb" alt="" v-if="item.storage==0" onerror="this.src='http://sy.xfd365.com/public/uploads/exp.jpg';this.onerror='null'" :class="{'isOver': item.storage==0}">
							<div v-if="item.storage==0"
								style="position: absolute;left: calc(50% - 30px);top: 45px;background: rgba(0, 0, 0, 0.6);border-radius: 4px;">
								<p style="color: #fff;">已售完</p>
							</div>
							<p class="proTip" :class="{'isOver': item.storage==0}">拼团价</p>
							<p>
								{{item.goods_name}}<br>
							</p>
							<div class="pricePromtion" style="overflow: hidden;">
								<span style="font-weight: normal;font-size: 12px;">￥&nbsp; </span><span>{{item.team_price}}</span>
								<span style="color: #CCCCCC;text-decoration: line-through;font-size: 11px;font-weight: normal; overflow: hidden; display: -webkit-box;">&nbsp;￥{{item.price}}</span>
							</div>
						</div>
					</div>
					<div style="text-align: center; color: #fff; padding: 0.2rem;" @click="jump('groupActivityList.html')">查看更多</div>
				</van-tab>
			</van-tabs>
		</div>
		<van-sticky >
			<div class="fenlei" :class="{'isFixed': isFixed}" id="searchBar">
				<ul class="nav">
					<li :class="{'active':curr==0}" @click="handleClick('',0)">
						<img src="images/more.png" alt="" width="20" />
						<span>全部</span>
					</li>
					<li :class="{'active':curr==index+1}" v-for="(item, index) in goods_sort"
						@click="handleClick(item.cate_id,index)">
						<img :src="item.icon?item.icon:'images/nav5.png'" alt="">
						<span>{{item.cate_name}}</span>
					</li>
				</ul>
			</div>
		</van-sticky>
		
		<div style="position: relative; min-height: 9rem;">
			<template v-if="goods_list && goods_list.length > 0">
				<van-grid :column-num="2" :gutter="10" class="goods-con">
					<van-grid-item  v-for="(item, index) in goods_list">
						<template #icon>
							<van-image @click="details(item.goods_id, item.spcifi_name)" width="100%" height="100%" fit="contain" :style="item.storage <= 0 ? 'opacity:0.4': ''" :src="item.thumb ? item.thumb : 'http://sy.xfd365.com/public/uploads/exp.jpg'"></van-image>
							<div class="no-sale" v-if="item.storage <= 0">已售罄</div>
						</template>
						<template #text>
							<div class="goods-title" :style="item.storage <= 0 ? 'opacity:0.6': ''">{{item.goods_name}}</div>
							<div class="goods-spec" :style="item.storage <= 0 ? 'opacity:0.6': ''">{{item.spcifi_name_new}}</div>
							<div class="price-con">
								<div class="left-con" :style="item.storage <= 0 ? 'opacity:0.6': ''">
									<div class="price-cell" v-if="item.promotion_price && item.num <=(item.promotion_num-item.has_buy)">
										<span class="price" v-if="item.unit"><span class="price-icon">￥</span>{{item.promotion_price}}<span class="unit">/{{item.unit}}</span></span>
										<span class="price" v-else><span class="price-icon">￥</span>{{item.promotion_price}}</span>
										<span class="price2" v-if="item.unit"><span class="price-icon"></span>{{item.retail_price}}<span class="unit">/{{item.unit}}</span></span>
										<span class="price2" v-else><span class="price-icon">￥</span>{{item.retail_price}}</span>
									</div>
									<div class="price-cell" v-else>
										<span  class="price" v-if="item.unit"><span class="price-icon">￥</span>{{item.retail_price}}<span class="unit">/{{item.unit}}</span></span>
										<span class="price"	 v-else><span class="price-icon">￥</span>{{item.retail_price}}</span>
									</div>
								</div>
								<div class="right-con">
									<span v-if="item.storage <= 0" style="display: block; border: none;font-size: 0.24rem;width: 0.42rem;height: 0.42rem; background-image: url(images/icon/shouqin.png);background-size: 100% 100%;margin-bottom: 5px;"></span>
									<div v-if="item.num == 0 && item.storage!=0 "
										style="display: flex;justify-content: flex-end;margin-bottom: 5px;">
										<img src="images/jiagou.png" alt="" style="width: 0.42rem;height: 0.42rem;"
											@click="addG(index,item.goods_id,item.spcifi_id, item.promotion_num, item.has_buy, item.storage)">
									</div>
									<div v-if="item.num > 0 && item.storage>0" style="display: flex;justify-content: flex-end;">
										<img src="./images/speedBuy/jian.png" alt="" class="fl" style="width: 0.42rem;height: 0.42rem;"
											@click="reduceChange(item.goods_id,item.spcifi_id,item.num, index)">
										<div class="fl" style="margin-left: 5px;margin-right: 5px;margin-top: 2px;max-width: 20px; overflow: hidden; overflow-x: auto;">{{item.num}}</div>
										<img src="./images/jiagou.png" alt="" class="fl" style="width: 0.42rem;height: 0.42rem;"
											@click="addChange(item.goods_id,item.spcifi_id,item.promotion_num, item.has_buy, item.storage)">
									</div>
								</div>
							</div>
						</template>
					</van-grid-item>
				</van-grid>
			</template>
			<template v-else>
				<div class="no-data-con">
					<img src="./images/icon/no-goods.png" alt="">
					<p class="no-title">该分类下商品为空</p>
					<p class="no-desc">赶紧去其他分类逛逛吧</p>
				</div>
			</template>
			<div v-if="goods_list && goods_list.length > 0 && isNoData" style="font-size: 0.28rem; text-align: center; padding: 10px 0 5px 0; color: #888;">没有更多了</div>
		</div>
		<!-- 列表 -->
		<div style="height: 60px;"></div>
			<van-tabbar v-model="tabbarIndex" active-color="#04C03A">
				<van-tabbar-item >
					<template #icon>
						<img src="images/icon/sy2.png" width="18px" alt="">
					</template>
					首页
				</van-tabbar-item>
				<van-tabbar-item @click="speed()">
					<template #icon>
						<img src="images/icon/jsgm.png" width="18px" alt="">
					</template>
					分类
				</van-tabbar-item>
				<van-tabbar-item @click="service()">
					<template #icon>
						<img src="images/icon/service.png" width="18px" alt="">
					</template>
					业务
				</van-tabbar-item>
				<van-tabbar-item :badge="count > 0 ? count : null" @click="shoppingCart()">
					<template #icon>
						<img src="images/icon/gwc1.png" width="18px" alt="">
					</template>
					购物车
				</van-tabbar-item>
				<van-tabbar-item @click="personal()">
					<template #icon>
						<img src="images/icon/grzx.png" width="18px" alt="">
					</template>
					我的
				</van-tabbar-item>
			</van-tabbar>

		<!-- </div> -->

		<!-- <div @click="shareGoods()" class="share-mask" v-show="isShare">
				<div style="width:100%;height:80px;">
					<img style="display:block;position:fixed;right:10px;top:0px;width:80px;height:80px;"  src="images/icon/share.png" alt="">
				</div>
				<div class="share-mask-content">
				<p>点击右上角</p>
				<p>通过【发送给朋友】</p>
				<p>分享自己的店铺</p>
				</div>
			</div> -->

		<div class="message-page-mask" v-show="message.show==1">
			<div class="message-page-mask-content">
				<div class="el-loading-spinner">
					<i v-show="message.type=='success' " class="el-icon-success"></i>
					<i v-show="message.type=='error' " class="el-icon-error"></i>

					<p class="el-loading-text">{{message.text}}</p>
				</div>
			</div>
		</div>

		<div class="page-mask" v-show="loading">
		
			<div class="page-mask-content">
				<div class="el-loading-spinner"><i class="el-icon-loading"></i>
					<p class="el-loading-text">拼命加载中</p>
				</div>
			</div>
		
		</div>

		<!-- <div class="overlay" v-show="isAction" @click="isAction=false"></div> -->
		<!-- <van-overlay :show="isAction" @click="isAction = false" ></van-overlay>
		<div class="actionSheet" v-show="isAction">
			<h3>请选择店铺<span @click="manageFlagFF()">{{manageText}}</span></h3>
			<div style="padding: 0 0.24rem; background: #fff;" >
				<ul>
					<li v-for="item in buttons"><span @click="currentShop(item.id)">
							{{item.shop_name}}</span> <span class="imgSpan" v-if="deleteBtn&&item.show"
							@click="deleteShop(item.id)"><img src="images/del.png" /></span> </li>
				</ul>
			</div>
			<p  @click="isAction=false">取消</p>
		</div> -->
		<van-popup v-model="isAction" round position="bottom" :style="{ height: '60%' }" >
			<div class="tit-con">
				<span class="type"></span>
				<span class="text">请选择店铺</span>
				<span class="type" @click="manageFlagFF()">{{manageText}}</span>
			</div>
			<div class="shop-con van-hairline--top">
				<div class="shop-item" v-for="item in buttons" @click="currentShop(item.id)">
					<div class="title" :style="manageText == '完成' ? 'padding-right:85px' : ''">
						{{item.shop_name}}
						<div class="del-icon" v-if="deleteBtn&&item.show"  @click.stop="deleteShop(item.id)" >删除</div>
					</div>
				</div>
				<!-- <img  v-if="deleteBtn&&item.show"  src="images/del.png" width="16px" @click="deleteShop(item.id)" alt=""> -->
			</div>
			<div class="btn-con">
				<van-button type="default" block round @click="isAction=false">取消</van-button>
			</div>
		</van-popup>
		
	</div>

	<script>
		apiready = function () {
			api.parseTapmode();
		}
		var actionsheet = new auiActionsheet();
		var app = new Vue({
			el: '#app',
			data: {
				tabbarIndex: 0,
				// lookup:0,
				// goods_name:'',				//搜索的商品名称
				showPage: 0,
				mark: 0,
				show: true,
				code: '',
				token: localStorage.getItem("token"),
				couponList: [],
				announcement: '', //公告
				bannerImg: [],
				banner: [{
						url: 'http://sy.xfd365.com/mobile/images/banner1.png'
					},
					{
						url: 'http://sy.xfd365.com/mobile/images/banner2.png'
					},
					{
						url: 'http://sy.xfd365.com/mobile/images/banner3.png'
					},
				],
				goods_list: [], //商品列表
				goods_sort: [], //所有商品分类
				item: {
					token: localStorage.getItem("token"),
					page: 2,
					size: 10,
				},
				JumpUrl: {
					sort: baseUrl('/wx/cate/index'),
					// sort: 'http://172.168.0.50/wx/cate/index',
					list: baseUrl('/wx/goods/goodsListsTest'),
					// list: 'http://172.168.0.50/wx/goods/goodsListsTest',
					homeData: baseUrl('/wx/index/index'),
					// homeData: 'http://172.168.0.50/wx/index/index',
					token: 'http://sy.xfd365.com/wx/wechat/login', //微信登录
					checkToken: 'http://sy.xfd365.com/wx/base/checkToken', //检查token
					shopInfoUrl: baseUrl('/wx/shop/shop_info'), //获取店铺信息
					// shopInfoUrl: 'http://172.168.0.50/wx/shop/shop_info', //获取店铺信息
					jssdkUrl: 'http://sy.xfd365.com/wx/jssdk/getSignPackage',
					my_shops: baseUrl('/wx/shop/my_shops'),
					// my_shops: 'http://172.168.0.50/wx/shop/my_shops',
					user_info: baseUrl('/wx/shop/user_info'),
					// user_info: 'http://172.168.0.50/wx/shop/user_info',
					changeShop: baseUrl('/wx/shop/changeShop'),
					// changeShop: 'http://172.168.0.50/wx/shop/changeShop',
					promotion: baseUrl('/wx/index/promotion_goodsTest'),
					// promotion: 'http://172.168.0.50/wx/index/promotion_goodsTest',
					add: baseUrl('/wx/cart/new_add'),
					// add: 'http://172.168.0.50/wx/cart/new_add',
					delShop: baseUrl('/wx/shop/delShop'),
					// delShop: 'http://172.168.0.50/wx/shop/delShop',
					index: baseUrl('/wx/cart/new_cart'),
					// index: 'http://172.168.0.50/wx/cart/new_cart',
					coupon_list:baseUrl('/wx/coupon/shop_coupon_list'), 
					// coupon_list:'http://172.168.0.50/wx/coupon/coupon_list', 
					platform_coupon: baseUrl('/wx/coupon/get_shop_platform_coupon'),
					scan_offline_coupon: baseUrl('/wx/coupon/scan_offline_coupon'),
					if_shop_owner: baseUrl('/wx/coupon/if_shop_owner'),
					teams_lists: baseUrl('/wx/team/teams_lists'),
				},
				promotion_goods: [],
				teamsGoodsList: [],
				page: 1,
				loading: 0,
				isDone: 0,
				shopInfo: [],
				share_url: "",
				code: '',
				shop_id: '',
				searchModel: '',
				searchShow: false,
				buttonTitle: '',
				buttons: [],
				isShare: false,
				// current: 0,
				gzh: '',
				isAction: false,
				curr: 0,
				cate_id: '',
				addGoodData: {
					goods_id: '',
					token: localStorage.getItem("token"),
					number: 1,
					is_now: 0,
				},
				message: {
					show: 0,
					type: 'success',
					text: '成功',
				},
				manageText: '管理',
				deleteBtn: false,
				cartList: [],
				addGoods: {
					goods_id: '',
					number: 0,
					is_now: 0,
					token: localStorage.getItem("token"),
				},
				num: 1,
				box: 1,
				count: 0,
				isFixed: false, // 判断分类是否固定
				offsetTop: document.querySelector('#searchBar').offsetTop,
				fenleiTop:document.querySelector('#searchBar').offsetTop,
				scanQrcodeId: '',
				isNoData: false,
				myShopId: '',
				curShopId: '',
				lock_user_id:''
			},
			methods: {
				// banner展示
				bannerClick(item) {
					if(item.type == 1) {
						window.location.href='goodsDetails.html?id='+item.link+'&v=2'
					} else if(item.type == 2) {
						window.location.href='speedBuy.html?cateIdByBanner='+item.link+'&v=3'
					}
				},
				onScroll() {
					// if (this.isDone) {
					// 	return;
					// }
					/*页面高度*/
					var scrollTop = 0;
					if (document.documentElement && document.documentElement.scrollTop) {
						scrollTop = document.documentElement.scrollTop;
					} else if (document.body) {
						scrollTop = document.body.scrollTop;
					}
					/*当前可视高度*/
					let clientHeight = document.documentElement.clientHeight;
					/*文档完整的高度*/
					// let scrollHeight = Math.max(document.body.scrollHeight, document.documentElement.scrollHeight);
					let scrollHeight = document.documentElement.scrollHeight
					// console.log(clientHeight + '--' + scrollHeight)

					let offsetTop;
					if(this.promotion_goods.length > 0 || this.couponList.length > 0 || this.teamsGoodsList.length > 0){
						if(this.promotion_goods.length > 0) {
							offsetTop = document.querySelector('.qianggou').offsetHeight + document.querySelector('.headDiv').offsetHeight
						}
						if(this.teamsGoodsList.length > 0){
							offsetTop = document.querySelector('.pintuan').offsetHeight + document.querySelector('.headDiv').offsetHeight
						} 
						if(this.couponList.length > 0) {
							offsetTop = document.querySelector('.headDiv').offsetHeight + document.querySelector('.guafen-con').offsetHeight
						}
						if(this.promotion_goods.length && this.teamsGoodsList.length > 0) {
							offsetTop = document.querySelector('.pintuan').offsetHeight + document.querySelector('.headDiv').offsetHeight +document.querySelector('.qianggou').offsetHeight
						}
						if(this.promotion_goods.length && this.couponList.length > 0) {
							offsetTop = document.querySelector('.headDiv').offsetHeight +document.querySelector('.guafen-con').offsetHeight + document.querySelector('.qianggou').offsetHeight
						}
						if(this.teamsGoodsList.length && this.couponList.length > 0) {
							offsetTop = document.querySelector('.pintuan').offsetHeight + document.querySelector('.headDiv').offsetHeight +document.querySelector('.guafen-con').offsetHeight
						}
						if(this.teamsGoodsList.length && this.couponList.length > 0 && this.promotion_goods.length > 0) {
							offsetTop = document.querySelector('.pintuan').offsetHeight + document.querySelector('.headDiv').offsetHeight +document.querySelector('.guafen-con').offsetHeight + document.querySelector('.qianggou').offsetHeight
						}
					}else{
						offsetTop = document.querySelector('.headDiv').offsetHeight
					}
					// if(scrollTop > offsetTop){
					// 	this.isFixed = true
					// }else if((scrollHeight - clientHeight - scrollTop) < offsetTop){
					// 	this.isFixed = false
					// }else{
					// 	this.isFixed = false
					// }
					this.fenleiTop = offsetTop

					let that = this;
					if ((scrollHeight - clientHeight - scrollTop) <= 300) {
						if (that.loading == 1) {
							return;
						}
						if(that.isNoData) return
						that.page += 1;
						that.loading = 1;
						that.goodsList();
					}

				},
				// 页面跳转
				jump(url) {
					window.location.href = url;
				},
				// 极速购买跳转
				speed: function () {
					window.location.href = "speedBuy.html?v=2";
				},
				// 服务跳转
				service: function () {
					console.log(123)
					window.location.href = "service.html?v=2";
				},
				//个人中心跳转
				personal: function () {
					window.location.href = "personal.html";
				},
				//购物车跳转
				shoppingCart: function () {
					window.location.href = "shoppingCart.html";
				},
				// 判断是否为商家
				getShopUser() {
					let that = this;
					axios({
						method: 'post',
						url: that.JumpUrl.if_shop_owner,
						data: { token: localStorage.getItem("token") }
					})
					.then(function (resp) { //返回数据
						// resp.data = JSON.parse(resp.data)
						if(resp.data.code == 1) {
							if(Number(resp.data.data) > 0) {
								that.myShopId = Number(resp.data.data)
							}
						}
					}).catch(function (error) {
						//请求失败
						console.log('error', error);
					})
				},
				// 获取优惠券列表
				getCouponList() {
					let that = this;
					axios({
						method: 'post',
						url: that.JumpUrl.coupon_list,
						data:{tab_type: '0',token: localStorage.getItem("token")}
					})
					.then(function (resp) {
						let data=resp.data
						if(data.code == 1){
							if(data.data && data.data.length > 0) {
								let tmpData = [];
								let i = 0;
								data.data.forEach(item =>{
									if(item.can_get == 1) {
										// if(i < 2) {
											tmpData.push(item)
										// }
										i++
									}
								})
								that.couponList = tmpData
							}
						}

					})
				},
				//商品详情
				details(id, spcifi_name) {
					/*页面高度*/
					var scrollTop = 0;
					if (document.documentElement && document.documentElement.scrollTop) {
						scrollTop = document.documentElement.scrollTop;
					} else if (document.body) {
						scrollTop = document.body.scrollTop;
					}
					localStorage.setItem('goods_list', JSON.stringify(this.goods_list))

					localStorage.setItem('curr', this.curr)
					localStorage.setItem('cateId', this.cate_id)
					localStorage.setItem('index_scroll', scrollTop)

					if (spcifi_name) {
						var dataPromotion = {}
						dataPromotion.spcifi_name = spcifi_name
						localStorage.setItem('dataPromotion', JSON.stringify(dataPromotion))
					} else {
						localStorage.setItem('dataPromotion', '')
					}
					window.location.href = "goodsDetails.html" + '?' + 'id=' + id+'&v=2';

				},
				// 促销商品详情
				detailsCuXiao(id, spcifi_name) {
					/*页面高度*/
					var scrollTop = 0;
					if (document.documentElement && document.documentElement.scrollTop) {
						scrollTop = document.documentElement.scrollTop;
					} else if (document.body) {
						scrollTop = document.body.scrollTop;
					}

					// console.log(scrollTop)
					localStorage.setItem('goods_list', JSON.stringify(this.goods_list))
					localStorage.setItem('curr', this.curr)
					localStorage.setItem('cateId', this.cate_id)
					localStorage.setItem('index_scroll', scrollTop)

					if (spcifi_name) {
						var dataPromotion = {}
						dataPromotion.spcifi_name = spcifi_name
						localStorage.setItem('dataPromotion', JSON.stringify(dataPromotion))
					} else {
						localStorage.setItem('dataPromotion', '')
					}

					window.location.href = "goodsDetails.html" + '?' + 'id=' + id+'&v=2';

				},
				// 拼团详情
				detailsPinTuan(item) {
					/*页面高度*/
					var scrollTop = 0;
					if (document.documentElement && document.documentElement.scrollTop) {
						scrollTop = document.documentElement.scrollTop;
					} else if (document.body) {
						scrollTop = document.body.scrollTop;
					}

					localStorage.setItem('goods_list', JSON.stringify(this.goods_list))
					localStorage.setItem('curr', this.curr)
					localStorage.setItem('cateId', this.cate_id)
					localStorage.setItem('index_scroll', scrollTop)

					if (item.spcifiName) {
						var dataPromotion = {}
						dataPromotion.spcifi_name = item.spcifiName
						localStorage.setItem('dataPromotion', JSON.stringify(dataPromotion))
					} else {
						localStorage.setItem('dataPromotion', '')
					}
					window.location.href = 'groupGoodsDetails.html?id=' + item.goods_id+ '&team_id='+item.team_id +'&v=2';

				},
				//搜索框
				search: function () {
					window.location.href = "lookupGoods.html";
				},
				//所有商品分类
				goodsSort: function () {
					var that = this;
					axios({
							method: 'post',
							url: that.JumpUrl.sort,
							data: {
								token: that.token,
							}
						})
						.then(function (resp) {
							// that.goods_sort = resp.data.data.slice(0, 4);
							that.goods_sort = resp.data.data
							// console.log(that.goods_sort)

						}).catch(function (error) {
							//请求失败
							console.log('error', error);

						})
				},
				// 切换分类
				handleClick: function (id, index) {
					var that = this
					// let page=that.page
					that.isNoData = false
					that.goods_list = []
					that.page = 1;
					that.isDone = 0
					that.cate_id = id
					let offsetTop;
					// if(this.promotion_goods != ''){
					// 	offsetTop = 540
					// }else{
					// 	offsetTop = 285
					// }
					// document.documentElement.scrollTop = offsetTop;

					if (id == '') {
						that.curr = 0
						axios({
								method: 'post',
								url: that.JumpUrl.list,
								data: {
									token: that.token,
									page: that.page,
									cate_id: id
								},
							})
							.then(function (resp) {
								that.loading = 0;
								if (resp.data.errno == 0) {
									if(resp.data.data.data.length == 0) {
										that.isDone = 1;
										that.loading = 0;
										that.isNoData = true
										return
									}
									let cartList = that.cartList
									for (var i = 0; i < resp.data.data.data.length; i++) {
										resp.data.data.data[i].num = 0;
										for (var j = 0; j < cartList.length; j++) {
											if (cartList[j].goods_id == resp.data.data.data[i].goods_id &&
												cartList[j].spcifi_id == resp.data.data.data[i].spcifi_id) {
												resp.data.data.data[i].num = cartList[j].number;
											}
										}
									};

									that.goods_list = resp.data.data.data
								
									if(resp.data.data.data.length < resp.data.data.size) {
										that.isDone = 1;
										that.loading = 0;
										that.isNoData = true
									}
								}

							}).catch(function (error) {
								that.loading = 0;
								//请求失败
								console.log('error', error);

							})
					} else {
						that.curr = index + 1
						axios({
								method: 'post',
								url: that.JumpUrl.list,
								data: {
									token: that.token,
									cate_id: id,
									page: that.page,
								},
							})
							.then(function (resp) {
								that.loading = 0;
								if (resp.data.errno == 0) {
									if(resp.data.data.data.length == 0) {
										that.isDone = 1;
										that.loading = 0;
										that.isNoData = true
										return
									}
									let cartList = that.cartList
									for (var i = 0; i < resp.data.data.data.length; i++) {
										resp.data.data.data[i].num = 0;
										for (var j = 0; j < cartList.length; j++) {
											if (cartList[j].goods_id == resp.data.data.data[i].goods_id &&
												cartList[j].spcifi_id == resp.data.data.data[i].spcifi_id) {
												resp.data.data.data[i].num = cartList[j].number;
											}
										}
									};

									that.goods_list = resp.data.data.data
									if(resp.data.data.data.length < resp.data.data.size) {
										that.isDone = 1;
										that.loading = 0;
										that.isNoData = true
									}
								}

							}).catch(function (error) {
								that.loading = 0;
								//请求失败
								console.log('error', error);

							})
					}
				},

				addG(index, goods_id, spcifi_id, promotion_num, has_buy, storage) {
					let that = this;
					let canBuyName = promotion_num - has_buy;
					let carNum = 0;
					let cartList = that.cartList
					cartList.forEach(function (ele) {
						if (ele.goods_id == goods_id && ele.spcifi_id == spcifi_id) {
							carNum = ele.number;
						}
					})
					if (carNum >= storage) {
						that.message = {
							show: 1,
							text: '库存不足',
							type: 'error'
						}
						setTimeout(function () {
							that.message.show = 0;
						}, 2000)
						return
					} else {
						if ((promotion_num == has_buy || carNum == canBuyName) && has_buy != -1) {
							that.$toast('每人限购' + promotion_num + '件，超出数量将按原价累加')
						}
						that.i = index;
						that.addGoods.goods_id = goods_id;
						that.addGoods.spcifi_id = spcifi_id;
						that.addGoods.number = 1;
						that.addCart(-1);
					}

					// this.i = index;
					// this.addGoods.goods_id = goods_id;
					// this.addGoods.number = 1;
					// this.addCart(-1);
				},


				//增加商品
				addChange(goods_id, spcifi_id, promotion_num, has_buy, storage) {
					var that = this;
					let canBuyName = promotion_num - has_buy;
					let carNum = 0;
					let cartList = that.cartList
					cartList.forEach(function (ele) {
						if (ele.goods_id == goods_id && ele.spcifi_id == spcifi_id) {
							carNum = ele.number;
						}
					})

					if (carNum >= storage) {
						that.message = {
							show: 1,
							text: '库存不足',
							type: 'error'
						}
						setTimeout(function () {
							that.message.show = 0;
						}, 2000)
						return;
					} else {
						if ((promotion_num == has_buy || carNum == canBuyName) && has_buy != -1) {
							that.$toast('每人限购' + promotion_num + '件，超出数量将按原价累加')
						}
						that.addGoods.goods_id = goods_id
						that.addGoods.spcifi_id = spcifi_id
						that.addGoods.number = 1;
						that.addCart();
					}

				},

				//减去商品
				reduceChange(goods_id, spcifi_id, num, index) {
					var that = this;
					that.addGoods.goods_id = goods_id;
					that.addGoods.spcifi_id = spcifi_id;
					that.addGoods.number = -1;

					if (num < 1) {
						return;
						that.addGoods.number = 0
					} else {
						that.addCart(index);
						that.addGoods.number = -1;
					}
					let goods_list = that.goods_list
					if (that.cartList.length == 0) {
						that.flag = 1;
						goods_list.forEach(function (ele) {
							ele.num = 0
						})
					} else {
						let ids = []
						that.cartList.forEach(item =>{
							if(item.goods_id == goods_list[index].goods_id) {
								ids.push(item.goods_id)
							}
						})
						if(ids.indexOf(goods_list[index].goods_id) > -1) {
							if(num <= 1) {
								goods_list[index].num = 0
							}
						}
					}
				},

				//添加商品/wx/cart/add
				addCart(index) {
					let that = this;
					if (that.box == 2) {
						return
					}
					that.box = 2;
					axios({
							method: 'post',
							url: that.JumpUrl.add,
							data: that.addGoods
						})
						.then(function (resp) {
							that.box = 1;
							if (resp.data.errno === 0) {
								that.count = resp.data.data.cartTotal.checkedGoodsCount; //总共几件

								that.cartList = resp.data.data.cartList;

								for (var i = 0; i < that.cartList.length; i++) {
									for (var j = 0; j < that.goods_list.length; j++) {
										if (that.cartList[i].goods_id == that.goods_list[j].goods_id && that.cartList[i].spcifi_id == that.goods_list[j].spcifi_id) {
											that.goods_list[j].num = that.cartList[i].number;
											if (that.goods_list[j].num < 0) {
												that.goods_list[j].num = 0;
											}
										} 
									}

								}
							} else {
								that.message = {
									show: 1,
									text: resp.data.errmsg,
									type: 'error'
								}
								setTimeout(function () {
									that.message.show = 0;
								}, 2000)
								return;
							}



						}).catch(function (error) {
							//请求失败
							console.log('error', error);

						})
				},
				//获取购物车内容
				myCart() {
					let that = this;
					let form_data = new FormData();
					makeFormData(that.addGoods, form_data);
					axios({
							method: 'post',
							url: that.JumpUrl.index,
							data: form_data
						})
						.then(function (resp) {
							that.cartList = resp.data.data.cartList;
							that.count = resp.data.data.cartTotal.checkedGoodsCount;
							// console.log(that.cartList)
						}).catch(function (error) {
							//请求失败
							console.log('error', error);

						})
				},

				//首页获取商品列表
				goodsList() {
					var that = this;
					let page = that.page
					axios({
							method: 'post',
							url: that.JumpUrl.list,
							data: {
								token: localStorage.getItem('token'),
								page: page,
								cate_id: that.cate_id

							}
						})
						.then(function (resp) {
							if (resp.data.data.data.length == 0) {
								that.isDone = 1;
								that.loading = 0;
								that.isNoData = true
								return;
							}
							let cartList = that.cartList
							for (var i = 0; i < resp.data.data.data.length; i++) {
								resp.data.data.data[i].num = 0;
								for (var j = 0; j < cartList.length; j++) {
									if (cartList[j].goods_id == resp.data.data.data[i].goods_id && cartList[j]
										.spcifi_id == resp.data.data.data[i].spcifi_id) {
										resp.data.data.data[i].num = cartList[j].number;
									}
								}
							};



							if (page == 1) {
								that.goods_list = resp.data.data.data
								that.loading = 0;
							} else {
								for (let item of resp.data.data.data) {
									that.goods_list.push(item);
								}
								that.loading = 0;
							}

							if (that.goods_list) {
								that.goods_list.forEach(ele => {
									if (ele.spcifi_name.charAt(ele.spcifi_name.length - 1) ==
										",") { // 一个属性最后两个逗号，两个属性最后一个逗号，三个属性最后没有逗号
										ele.spcifi_name_new = ele.spcifi_name.substr(0, ele
											.spcifi_name.length - 1);
										if (ele.spcifi_name_new.charAt(ele.spcifi_name_new.length -
												1) == ",") {
											ele.spcifi_name_new = ele.spcifi_name_new.substr(0, ele
												.spcifi_name_new.length - 1);
										}
									} else {
										ele.spcifi_name_new = ele.spcifi_name
									}
								})
							}
							if (resp.data.data.data.length < resp.data.data.size) {
								that.isDone = 1;
								that.loading = 0;
								that.isNoData = true
								return;
							}

							// console.log(that.goods_list)
						}).catch(function (error) {
							that.loading = 0;
							//请求失败
							console.log('error', error);

						})
				},
				//banner图片
				// autoPlay() {
				// 	this.mark++;
				// 	if (this.mark === this.bannerImg.length) { //当遍历到最后一张图片置零
				// 		this.mark = 0
				// 	}
				// },
				//banner图片
				// play() {
				// 	this.autoPlay()
				// 	setInterval(this.autoPlay, 2500)
				// },
				//banner图片
				// change(i) {
				// 	this.mark = i
				// },
				// onChange(index) {
				//       this.current = index;
				//     },
				//首页数据
				homePageData: function () {
					var that = this;
					axios({
							method: 'post',
							url: that.JumpUrl.homeData,
							data: {
								token: localStorage.getItem('token'),
							}
						})
						.then(function (resp) {
							//返回数据
							that.announcement = resp.data.data.announcement;
							that.bannerImg = resp.data.data.banner
						}).catch(function (error) {
							//请求失败
							console.log('error', error);

						})
				},
				getShopInfo() {
					let that = this;
					axios({
						method: 'post',
						url: that.JumpUrl.shopInfoUrl,

						data: {
							token: that.token,
							lock_user_id: getQueryString('lock_user_id')
							// shop_id: localStorage.getItem("shop_id")
						}
					}).then(function (resp) {
						let data = resp.data
						// console.log(JSON.stringify(data))
						if (data.errno == 0) {

							var shopId = localStorage.getItem("shop_id");
							// console.log(shopId)
							if (shopId) {

							} else {
								localStorage.setItem('shop_id', data.data.id);
							}
							that.curShopId =  data.data.id
							localStorage.setItem('shopInfo', JSON.stringify(data.data));
							that.shopInfo = data.data
							// window.location.href = 'http://sy.xfd365.com/mobile/index.html?shop_id='+ that.curShopId +'&v=11'
							that.getJssdk();
							// getJssdk()
							that.getShopUser()

						}
					}).catch(function (error) {
						//请求失败
						console.log('error', error);


					})
				},
				// 促销商品
				promotionGoods() {
					axios({
						method: 'post',
						url: this.JumpUrl.promotion,
						data: {
							token: this.token
						}
					}).then(res => {
						if (res.data.errno === 0) {
							var data = res.data.data
							data.forEach(ele => {
								ele.num = 0
								if (ele.spcifi_name.charAt(ele.spcifi_name.length - 1) ==
									",") { // 一个属性最后两个逗号，两个属性最后一个逗号，三个属性最后没有逗号
									ele.spcifi_name_new = ele.spcifi_name.substr(0, ele.spcifi_name
										.length - 1);
									if (ele.spcifi_name_new.charAt(ele.spcifi_name_new.length - 1) ==
										",") {
										ele.spcifi_name_new = ele.spcifi_name_new.substr(0, ele
											.spcifi_name_new.length - 1);
									}
								} else {
									ele.spcifi_name_new = ele.spcifi_name
								}
							})
							this.promotion_goods = data
						}
					})
				},
				// 拼团商品
				getTeamsList() {
					let that = this;
					axios({
						method: 'post',
						url: that.JumpUrl.teams_lists,
						data: {
							token: localStorage.getItem('token'),
							page: 1,
							size: 10,
							goods_name:'',
						}
					})
					.then(function(resp) {
						if (resp.data.code == 1) {
							let resultData = resp.data.data.data;
							that.teamsGoodsList = resultData
						}
					}).catch(function(error) {
						//请求失败
						console.log('error', error);
					})
				},
				setWx() {
					let that = this;
					let shopInfo = that.shopInfo
					// let shopInfo = that.shopInfo;
					let share_title = shopInfo.share_title ? shopInfo.share_title : shopInfo.shop_name
					let share_introduction = shopInfo.share_introduction
					let shop_id = shopInfo.id
					let logo = shopInfo.share_pic ? shopInfo.share_pic : shopInfo.logo
					wx.ready(function () { //需在用户可能点击分享按钮前就先调用
						wx.updateAppMessageShareData({
							title: share_title, // 分享标题
							desc: share_introduction, // 分享描述
							// link: that.share_url, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
							link: 'http://sy.xfd365.com/mobile/index.html?shop_id=' + shop_id + '&lock_user_id=' + that.lock_user_id +'&v=11', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
							imgUrl: logo, // 分享图标
							success: function () {

							}
						})

						wx.updateTimelineShareData({
							title: share_title, // 分享标题
							desc: share_introduction, // 分享描述
							// link: that.share_url, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
							link: 'http://sy.xfd365.com/mobile/index.html?shop_id=' + shop_id + '&lock_user_id=' + that.lock_user_id +'&v=11', // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
							imgUrl: logo, // 分享图标
							success: function () {},
						})
					});
				},

				// 获取微信jssdk的配置
				getJssdk() {
					let that = this;
					// http://sy.xfd365.com/mobile/index.html?shop_id=26
					axios({
						method: 'post',
						url: that.JumpUrl.jssdkUrl,
						//data: form_data
						data: {
							token: that.token,
							url: window.location.href
						}
					}).then(function (resp) {
						// console.log(JSON.stringify(resp))
						let data = resp.data

						let sdkData = resp.data
						wx.config({
							debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
							appId: sdkData.appId, // 必填，公众号的唯一标识
							timestamp: sdkData.timestamp, // 必填，生成签名的时间戳
							nonceStr: sdkData.nonceStr, // 必填，生成签名的随机串
							signature: sdkData.signature, // 必填，签名
							jsApiList: [
								'updateTimelineShareData',
								'updateAppMessageShareData',
								'scanQRCode',
							] // 必填，需要使用的JS接口列表
						});
						that.share_url = sdkData.url;
						that.setWx();

					})
				},

				// token获取
				wechatLogin: function () {
					var that = this;
					// console.log(that.gzh)
					if (that.gzh) {
						axios({
								method: 'post',
								url: that.JumpUrl.token,
								//data: form_data
								data: {
									code: that.code,
									shop_id: that.shop_id,
									shoper_token: localStorage.getItem('shoper_token'),
									from: that.gzh
								}
							})
							.then(function (resp) { //返回数据
								that.token = resp.data.token;
								localStorage.setItem('token', that.token);
								window.history.pushState(null, null,
									'http://sy.xfd365.com/mobile/index.html?shop_id=' + that.shop_id + '&lock_user_id=' + getQueryString('lock_user_id') +'&v=11');
								if (that.token) {
									that.initData()
							
								}

							}).catch(function (error) {
								//请求失败
								console.log('error', error);

							})
					} else {
						axios({
								method: 'post',
								url: that.JumpUrl.token,
								//data: form_data
								data: {
									code: that.code,
									shop_id: that.shop_id,
									shoper_token: localStorage.getItem('shoper_token')
								}
							})
							.then(function (resp) { //返回数据
								that.token = resp.data.token;
								localStorage.setItem('token', that.token);
								window.history.pushState(null, null,
									'http://sy.xfd365.com/mobile/index.html?v=11');
								if (that.token) {
									that.initData()
								}

							}).catch(function (error) {
								//请求失败
								console.log('error', error);

							})
					}

				},
				// 核销优惠券
				scanOffCoupon() {
					var that = this;
					axios({
						method: 'post',
						url: that.JumpUrl.scan_offline_coupon,
						data: {
							token: that.token,
							coupon_info: that.scanQrcodeId,
						}

					})
					.then(function (resp) {
						if (resp.data.code == 1) {
							let data = resp.data.coupon
							that.$toast(resp.data.msg) 
						} else {
							that.$toast(resp.data.msg) 
						}
					}).catch(function (error) {
						console.log('error', error);
					})
				},
				// 扫码领取平台优惠券
				getPlatCoupon() {
					var that = this;
					axios({
						method: 'post',
						url: that.JumpUrl.platform_coupon,
						data: {
							token: that.token,
							lock_id: that.scanQrcodeId,
						}

					})
					.then(function (resp) {
						if (resp.data.code == 1) {
							that.$toast(resp.data.msg)
							setTimeout(() =>{
								that.currentShop(resp.data.shopId)
							},1000)
						} else {
							that.$toast(resp.data.msg)
							setTimeout(() =>{
								that.currentShop(localStorage.getItem('shop_id'))
							},1000)
						}
					}).catch(function (error) {
						//请求失败

					})
				},
				getScanQRCode() {
					let that = this;
					if(that.curShopId == that.myShopId) {
						// window.history.pushState(null, null,
						// 			'http://sy.xfd365.com/mobile/index.html');
						// window.location.href = 'scanDestroy.html'
						wx.scanQRCode({
							needResult: 1, // 默认为0，扫描结果由微信处理，1则直接返回扫描结果，
							scanType: ["barCode"], // 可以指定扫二维码还是一维码，默认二者都有
							success: function(res) {
								var result = res.resultStr.split(','); // 当needResult 为 1 时，扫码返回的结果
                                if(result[0] == 'CODE_128') {
                                    // 走正常核销接口
									that.scanQrcodeId = result[1]
									that.scanOffCoupon()
                                } else {
									that.$toast('错误代码'+result[0]+',请重新扫码')
                                }
							}
						
						});
						return
					}
					wx.scanQRCode({
						needResult: 1, // 默认为0，扫描结果由微信处理，1则直接返回扫描结果，
						scanType: ["qrCode"], // 可以指定扫二维码还是一维码，默认二者都有
						success: function(res) {
							that.scanQrcodeId = res.resultStr; // 当needResult 为 1 时，扫码返回的结果
							that.getPlatCoupon()
						}
					
					});       
                },
				wxSign: function () {
					var that = this;
					let back_url = 'http://sy.xfd365.com/mobile/index.html?v=11';

					if (that.shop_id) {
						back_url = 'http://sy.xfd365.com/mobile/index.html?shop_id=' + that.shop_id + '&lock_user_id=' + getQueryString('lock_user_id') +'&v=11';
					}
					if (that.gzh) {
						back_url = 'http://sy.xfd365.com/mobile/index.html?from=' + that.gzh+'&v=11' 
					}
					axios({
							method: 'post',
							url: 'http://sy.xfd365.com/wx/wechat/get_jump_url',
							// url: 'https://api.xfd365.com/wx/wechat/get_jump_url',
							data: {
								back_url: back_url,
							}
						})
						.then(function (resp) {
							//返回数据
							window.location.href = resp.data.url;


						}).catch(function (error) {
							//请求失败
							console.log('error', error);
						})
				},

				//检查token是否过期
				checkToken: function () {
					var that = this;
					axios({
							method: 'post',
							url: that.JumpUrl.checkToken,
							data: {
								token: this.token,
								shop_id: this.shop_id,
								from: that.gzh
							}

						})
						.then(function (resp) {
							// console.log(resp.data)
							//返回数据
							if (resp.data.errno == 1) {
								//token过期调用跳转页面方法
								localStorage.removeItem('token')
								localStorage.removeItem('shoper_token')
								that.wxSign();
							} else {

								// 这个接口返回的shop_id和本地localstorage里面的比较一下，如果不一样的话把这个存一下
								localStorage.setItem('shop_id', resp.data.data.shop_id)
								that.initData()
							}
						}).catch(function (error) {
							//请求失败
							console.log('error', error);

						})
				},
				initData() {
					this.getShopInfo();
					this.homePageData(); //	banner 图和公告列表
					// that.play(); //轮播图
					this.promotionGoods()
					this.getTeamsList()
					this.loading = 1;
					this.page = 1;
					this.goodsList(); //商品列表
					this.goodsSort(); //商品分类
					this.$nextTick(() => {
						this.myCart()
					})
					this.getCouponList()

					this.obtainShop();
					this.showPage = 1;
				},
				parseUrl(name) {
					let href = window.location.href
					if (href.indexOf(name) == -1) {
						return '';
					}
					let param_str = href.substr(href.indexOf('?') + 1);
					let param_arr = param_str.split('&');
					for (let p of param_arr) {
						if (p.indexOf(name)) {

						}
					}
				},

				//弹窗
				openActionsheet() {
					var that = this;
					that.isAction = true;
					that.manageText = "管理";
					that.deleteBtn = false;
					for (var i = 0; i < that.buttons.length; i++) {
						if (that.buttonTitle == that.buttons[i].shop_name) {
							localStorage.setItem('shop_id', that.buttons[i].id);
						}
					};
				},
				//获取店铺
				obtainShop() {
					var that = this;
					axios({
							method: 'post',
							url: that.JumpUrl.my_shops,
							data: {
								token: localStorage.getItem("token"),
							}
						})
						.then(function (resp) {
							// console.log(resp.data.data)
							let buttons = resp.data.data
							// that.buttons = resp.data.data;
							for (var i = 0; i < buttons.length; i++) {
								if (buttons[i].id == localStorage.getItem("shop_id")) {
									that.buttonTitle = buttons[i].shop_name;
									buttons[i].show = false;
								} else {
									buttons[i].show = true;
								}
							};
							that.buttons = resp.data.data;
							// console.log(that.buttons)
						}).catch(function (error) {
							//请求失败
							console.log('error', error);

						})
				},

				// 切换管理
				manageFlagFF() {
					let that = this;
					that.deleteBtn = !that.deleteBtn;
					if (!that.deleteBtn) {
						that.manageText = "管理"
					} else {
						that.manageText = "完成"
					}

				},
				// 删除店铺
				deleteShop(id) {
					let that = this;
					that.$dialog.confirm({
						title: '提示',
						message: '确定删除吗?',
					}).then(() =>{
						axios({
							method: 'post',
							url: that.JumpUrl.delShop,
							data: {
								shop_id: id,
								token: localStorage.getItem("token"),
							}
						}).then(function (resp) {
							that.message = {
								show: 1,
								text: resp.data.msg,
								type: 'success'
							}
							setTimeout(function () {
								that.message.show = 0;
							}, 1000)

							that.obtainShop();
						}).catch(function (error) {
							//请求失败
							console.log('error', error);
						})
					})
				},
				//切换店铺
				currentShop(id) {
					var that = this;
					axios({
							method: 'post',
							url: that.JumpUrl.changeShop,
							data: {
								shop_id: id,
								token: localStorage.getItem("token"),
							}
						})
						.then(function (resp) {
							that.message = {
								show: 1,
								text: resp.data.msg,
								type: 'success'
							}
							setTimeout(function () {
								that.message.show = 0;
							}, 1000)
							window.location.href = '/mobile/index.html?shop_id=' + id + '&lock_user_id=' + getQueryString('lock_user_id') +'&v=11'

							that.myCart();

						}).catch(function (error) {
							//请求失败
							console.log('error', error);

						})
				},

			},
			created() {
				window.addEventListener('scroll', this.onScroll);
			},
			mounted() {
				
				axios.post('http://sy.xfd365.com/wx/distribute/get_wechat_user_id',{
					token: localStorage.getItem('token')
				}).then(res=>{
					if(res.data.errno == 0){
						this.lock_user_id = res.data.data
						localStorage.setItem('lock_user_id',res.data.data)
					}
				})
				this.loading = 1;
				let shop_id = getQueryString('shop_id');
				// console.log(shop_id)
				// this.isDone = 0;
				// this.loading = 0;
				// this.isNoData = false

				let gzh = getQueryString('from')
				// console.log(gzh)

				if (gzh) {
					this.gzh = gzh
				}
				if (shop_id) {
					this.shop_id = shop_id
					let code = getQueryString('code');
					if (code) {
						this.code = code;
					}

					var token = localStorage.getItem("token");
					if (this.code) {
						this.wechatLogin()
					} else {
						if (token) {
							this.checkToken()
						} else {
							this.wxSign()
						}
					}
					window.history.pushState(null, null, 'http://sy.xfd365.com/mobile/index.html?shop_id='+this.shop_id + '&lock_user_id=' + getQueryString('lock_user_id') + +'&v=11');
					if (shop_id != localStorage.getItem('shop_id')) {
						localStorage.setItem('shop_id', shop_id);
						this.currentShop(this.shop_id)
					}
					return
				} 
				let code = getQueryString('code');
				if (code) {
					this.code = code;
				}
				var token = localStorage.getItem("token");
				if (this.code) {
					this.wechatLogin()
				} else {
					if (token) {
						this.checkToken()
					} else {
						this.wxSign()
					}
				}
				

				
				if (token) {
					this.token = token;
				}

				let index_scroll = localStorage.getItem('index_scroll');
				let goods_list = localStorage.getItem('goods_list');
				let curr = localStorage.getItem('curr');
				let cate_id = localStorage.getItem('cateId');

				// console.log(goods_list)
				if (index_scroll > 0) {
					if (document.documentElement && document.documentElement.scrollTop) {
						document.documentElement.scrollTop = index_scroll;
					} else if (document.body) {
						document.body.scrollTop = index_scroll;
					}
					this.goods_list = JSON.parse(goods_list);
					this.curr = curr;
					this.cate_id = cate_id;
				}

				localStorage.removeItem('index_scroll');
				localStorage.removeItem('goods_list');
				localStorage.removeItem('curr');
				localStorage.removeItem('cateId');

				this.banner = JSON.parse(JSON.stringify(this.banner));

			},
			
		})
	</script>
</body>

</html>